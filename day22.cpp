#include <iostream>

long long shuffle10007(long long card) {
  return (((((((((10006-(10006-((((10006-((((((((10006-((10006-(((((((10006-((((((((((((((((10006-(10006-((((10006-((((((10006-(((((((((((((((((10006-((((((((((((((((((((((((10006-(((((((((((((((((((((10006-((((((10006-(card+6673)%10007)*4)%10007+342)%10007)*30)%10007+980)%10007+8829)%10007)*10)%10007+7351)%10007)*60)%10007+3766)%10007)*52)%10007+1477)%10007)*35)%10007+6979)%10007)*52)%10007+8287)%10007)*34)%10007+6400)%10007)*24)%10007)*28)%10007+2622)%10007)*32)%10007+1655)%10007)*66)%10007+2235)%10007)*40)%10007+1886)%10007)*71)%10007+2061)%10007)*73)%10007+2740)%10007)*19)%10007+7186)%10007)*16)%10007+2864)%10007)*31)%10007+9312)%10007)*26)%10007+867)%10007)*73)%10007+4459)%10007)*17)%10007+531)%10007)*70)%10007+9832)%10007)*46)%10007)*62)%10007+3517)%10007)*29)%10007+6731)%10007+3795)%10007)*9)%10007+2826)%10007+1018)%10007+9257)%10007)*39)%10007+5984)%10007)*69)%10007+8818)%10007)*74)%10007+373)%10007)*51)%10007+6733)%10007)*38)%10007+8067)%10007+3921)%10007)*3)%10007+8033)%10007)*38)%10007+3439)%10007)*68)%10007)*70)%10007+9)%10007)*32)%10007+9688)%10007)*4)%10007+1197)%10007)*54)%10007+582)%10007+404)%10007+8556)%10007)*47)%10007+2689)%10007)*38)%10007+8758)%10007)*48)%10007;
}

long long shuffle119315717514047(long long card) {
  return (((((((((119315717514046-(119315717514046-((((119315717514046-((((((((119315717514046-((119315717514046-(((((((119315717514046-((((((((((((((((119315717514046-(119315717514046-((((119315717514046-((((((119315717514046-(((((((((((((((((119315717514046-((((((((((((((((((((((((119315717514046-(((((((((((((((((((((119315717514046-((((((119315717514046-(card+119315717510713)%119315717514047)*4)%119315717514047+342)%119315717514047)*30)%119315717514047+980)%119315717514047+8829)%119315717514047)*10)%119315717514047+7351)%119315717514047)*60)%119315717514047+3766)%119315717514047)*52)%119315717514047+119315717505517)%119315717514047)*35)%119315717514047+6979)%119315717514047)*52)%119315717514047+8287)%119315717514047)*34)%119315717514047+6400)%119315717514047)*24)%119315717514047)*28)%119315717514047+119315717506662)%119315717514047)*32)%119315717514047+1655)%119315717514047)*66)%119315717514047+2235)%119315717514047)*40)%119315717514047+119315717505926)%119315717514047)*71)%119315717514047+2061)%119315717514047)*73)%119315717514047+119315717506780)%119315717514047)*19)%119315717514047+119315717511226)%119315717514047)*16)%119315717514047+119315717506904)%119315717514047)*31)%119315717514047+119315717513352)%119315717514047)*26)%119315717514047+119315717504907)%119315717514047)*73)%119315717514047+4459)%119315717514047)*17)%119315717514047+119315717504571)%119315717514047)*70)%119315717514047+9832)%119315717514047)*46)%119315717514047)*62)%119315717514047+119315717507557)%119315717514047)*29)%119315717514047+119315717510771)%119315717514047+119315717507835)%119315717514047)*9)%119315717514047+2826)%119315717514047+1018)%119315717514047+9257)%119315717514047)*39)%119315717514047+119315717510024)%119315717514047)*69)%119315717514047+8818)%119315717514047)*74)%119315717514047+373)%119315717514047)*51)%119315717514047+119315717510773)%119315717514047)*38)%119315717514047+119315717512107)%119315717514047+3921)%119315717514047)*3)%119315717514047+8033)%119315717514047)*38)%119315717514047+119315717507479)%119315717514047)*68)%119315717514047)*70)%119315717514047+9)%119315717514047)*32)%119315717514047+9688)%119315717514047)*4)%119315717514047+1197)%119315717514047)*54)%119315717514047+582)%119315717514047+404)%119315717514047+8556)%119315717514047)*47)%119315717514047+119315717506729)%119315717514047)*38)%119315717514047+8758)%119315717514047)*48)%119315717514047;
}

int main() {
    std::cout <<"shuffle 2019: " << shuffle10007(2019)<< std::endl;

    long long deck_size = 119315717514047;
    long long card = 2020;
    long long pos = card;
    long long times = 101741582076661;

    std::cout << "look for cycke\n";

    pos = shuffle119315717514047(pos);
    long long i = 1;
    while(pos != card && i != times) {
        pos = shuffle119315717514047(pos);
        ++i;
        if (!(i%1000000)){
            std::cout << ".";
        }
    }
    if (pos == card) {
        std::cout << "look for cycke: " << pos << "\n";
        times %= i;
        for(long long c; c != times; ++c) {
            pos = shuffle119315717514047(pos);
        }
    }
    std::cout << "long shuffle: " << card << std::endl;

}
